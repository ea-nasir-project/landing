---
const pathname = Astro.url.pathname;
const segments = pathname.split("/").filter((segment) => segment !== "");

// Map specific slugs to readable names if needed, or use a general formatter
const formatSegment = (segment: string) => {
  return segment
    .split("-")
    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
    .join(" ");
};

const breadcrumbs = segments.map((segment, index) => {
  const href = "/" + segments.slice(0, index + 1).join("/");
  return {
    label: formatSegment(segment),
    href,
    isLast: index === segments.length - 1,
  };
});
---

<nav aria-label="Breadcrumb" class="container mx-auto px-4 md:px-8 py-4">
  <ol role="list" class="flex items-center space-x-2 text-sm text-gray-500">
    <!-- Home Link -->
    <li>
      <a
        href="/"
        class="flex items-center hover:text-emerald-600 transition-colors"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          aria-hidden="true"
          class="size-5 shrink-0"
        >
          <path
            fill-rule="evenodd"
            d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z"
            clip-rule="evenodd"></path>
        </svg>
        <span class="sr-only">Home</span>
      </a>
    </li>

    {
      breadcrumbs.map((crumb) => (
        <li class="flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
            class="size-5 shrink-0 text-gray-400"
          >
            <path
              fill-rule="evenodd"
              d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
          {crumb.isLast ? (
            <span class="ml-2 font-medium text-emerald-800" aria-current="page">
              {crumb.label}
            </span>
          ) : (
            <a
              href={crumb.href}
              class="ml-2 font-medium hover:text-emerald-600 transition-colors"
            >
              {crumb.label}
            </a>
          )}
        </li>
      ))
    }
  </ol>
</nav>
